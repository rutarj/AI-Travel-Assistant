import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place\nDetails, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with\nbest time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"hotel_options\": [\n    {\n      \"name\": \"The D Las Vegas\",\n      \"address\": \"301 Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$50-$100 per night\",\n      \"image_url\": \"https://www.theDlasvegas.com/media/images/hotel/exterior-view-2.jpg\",\n      \"geo_coordinates\": \"36.1699° N, 115.1422° W\",\n      \"rating\": \"3.5 stars\",\n      \"description\": \"A budget-friendly hotel located in the heart of Fremont Street Experience, offering a retro vibe and a casino.\"\n    },\n    {\n      \"name\": \"Plaza Hotel & Casino\",\n      \"address\": \"1 Main Street, Las Vegas, NV 89101\",\n      \"price\": \"$60-$120 per night\",\n      \"image_url\": \"https://www.plazahotelcasino.com/media/images/hero-images/hero-image-plaza-casino-las-vegas.jpg\",\n      \"geo_coordinates\": \"36.1701° N, 115.1421° W\",\n      \"rating\": \"4 stars\",\n      \"description\": \"A historic hotel on Fremont Street with a casino, dining options, and a rooftop pool.\"\n    },\n    {\n      \"name\": \"Golden Nugget Las Vegas\",\n      \"address\": \"129 E Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$70-$150 per night\",\n      \"image_url\": \"https://www.goldennugget.com/las-vegas/media/images/hotel/exterior-view-2.jpg\",\n      \"geo_coordinates\": \"36.1698° N, 115.1419° W\",\n      \"rating\": \"4 stars\",\n      \"description\": \"A vibrant hotel on Fremont Street with a casino, an aquarium, and a variety of dining options.\"\n    },\n    {\n      \"name\": \"Circus Circus Hotel & Casino\",\n      \"address\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40-$80 per night\",\n      \"image_url\": \"https://www.circuscircus.com/media/images/hotel/exterior-view-2.jpg\",\n      \"geo_coordinates\": \"36.1085° N, 115.1728° W\",\n      \"rating\": \"3 stars\",\n      \"description\": \"A classic Las Vegas hotel with a circus theme, a casino, and family-friendly attractions.\"\n    },\n    {\n      \"name\": \"The Strat Hotel, Casino & SkyPod\",\n      \"address\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"$50-$100 per night\",\n      \"image_url\": \"https://www.thestrat.com/media/images/hotel/exterior-view-2.jpg\",\n      \"geo_coordinates\": \"36.1191° N, 115.1738° W\",\n      \"rating\": \"3.5 stars\",\n      \"description\": \"A hotel with a towering observation deck, a casino, and a variety of dining options.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"best_time_to_visit\": \"Morning\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a canopy of lights, live music, and street performers.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/hero_image/public/images/freemont-street-experience-las-vegas-hero.jpg\",\n          \"geoCoordinates\": \"36.1699° N, 115.1422° W\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.5 stars\",\n          \"timeTravel\": \"2 hours\"\n        },\n        {\n          \"placeName\": \"The Mob Museum\",\n          \"placeDetails\": \"A museum dedicated to the history of organized crime in America.\",\n          \"placeImageUrl\": \"https://www.themobmuseum.org/media/1964/the-mob-museum-exterior-photo.jpg\",\n          \"geoCoordinates\": \"36.1678° N, 115.1427° W\",\n          \"ticketPricing\": \"$29.95\",\n          \"rating\": \"4 stars\",\n          \"timeTravel\": \"2 hours\"\n        },\n        {\n          \"placeName\": \"Neon Museum\",\n          \"placeDetails\": \"A museum of historic Las Vegas neon signs.\",\n          \"placeImageUrl\": \"https://www.neonmuseum.org/sites/default/files/styles/hero/public/images/2022-06-17_neon_museum_exterior_5.jpg\",\n          \"geoCoordinates\": \"36.1709° N, 115.1373° W\",\n          \"ticketPricing\": \"$20\",\n          \"rating\": \"4 stars\",\n          \"timeTravel\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"Heart Attack Grill\",\n          \"placeDetails\": \"A restaurant known for its unhealthy but delicious food.\",\n          \"placeImageUrl\": \"https://www.theheartattackgrill.com/images/heart-attack-grill-las-vegas-774x461.jpg\",\n          \"geoCoordinates\": \"36.1699° N, 115.1422° W\",\n          \"ticketPricing\": \"N/A\",\n          \"rating\": \"3.5 stars\",\n          \"timeTravel\": \"1 hour\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"best_time_to_visit\": \"Afternoon\",\n      \"plan\": [\n        {\n          \"placeName\": \"The Strip\",\n          \"placeDetails\": \"The main boulevard of Las Vegas with its iconic casinos, hotels, and attractions.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/hero_image/public/images/las-vegas-strip-hero.jpg\",\n          \"geoCoordinates\": \"36.1149° N, 115.1735° W\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"5 stars\",\n          \"timeTravel\": \"3 hours\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A stunning garden with seasonal displays of flowers and plants.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/images/conservatory/conservatory-hero.jpg\",\n          \"geoCoordinates\": \"36.1173° N, 115.1749° W\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.5 stars\",\n          \"timeTravel\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"A choreographed water show set to music.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/images/fountains/fountain-hero.jpg\",\n          \"geoCoordinates\": \"36.1173° N, 115.1749° W\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"5 stars\",\n          \"timeTravel\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"An outdoor shopping and dining destination with the High Roller observation wheel.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/caesars/linq/linq-promenade.jpg\",\n          \"geoCoordinates\": \"36.1119° N, 115.1715° W\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4 stars\",\n          \"timeTravel\": \"2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"best_time_to_visit\": \"Morning\",\n      \"plan\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"A scenic area with red rock formations, hiking trails, and wildlife viewing opportunities.\",\n          \"placeImageUrl\": \"https://www.nps.gov/redr/planyourvisit/images/Red_Rock_Canyon_NCA_Scenic_Drive.jpg\",\n          \"geoCoordinates\": \"36.1831° N, 115.2342° W\",\n          \"ticketPricing\": \"$15 per vehicle\",\n          \"rating\": \"4.5 stars\",\n          \"timeTravel\": \"4 hours\"\n        },\n        {\n          \"placeName\": \"Hoover Dam\",\n          \"placeDetails\": \"A massive dam that is a landmark of the American Southwest.\",\n          \"placeImageUrl\": \"https://www.nps.gov/hove/learn/nature/images/Hoover-Dam-Panorama-600x300.jpg\",\n          \"geoCoordinates\": \"36.0008° N, 114.9988° W\",\n          \"ticketPricing\": \"Free to enter, tours available for a fee\",\n          \"rating\": \"4 stars\",\n          \"timeTravel\": \"2 hours\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Explanation of the JSON data:**\n\n* **hotel_options:** This array contains a list of budget-friendly hotels in Las Vegas with their names, addresses, prices, image URLs, geo coordinates, ratings, and descriptions.\n* **itinerary:** This array contains a 3-day itinerary for a couple visiting Las Vegas on a budget. Each day's plan includes:\n    * **day:** Day number.\n    * **best_time_to_visit:** Suggested time of day to visit.\n    * **plan:** An array of places to visit each day with details like:\n        * **placeName:** Name of the place.\n        * **placeDetails:** Description of the place.\n        * **placeImageUrl:** Image URL for the place.\n        * **geoCoordinates:** Geo coordinates for the place.\n        * **ticketPricing:** Ticket price information.\n        * **rating:** Rating for the place.\n        * **timeTravel:** Estimated time to spend at the place.\n\nThis plan focuses on free or low-cost activities, attractions, and dining options. You can customize the plan by adding or removing places based on your interests and budget."},
          ],
        },
      ],
    });
  